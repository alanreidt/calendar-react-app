(this["webpackJsonpcalendar-react-app"]=this["webpackJsonpcalendar-react-app"]||[]).push([[0],{145:function(e,a,t){e.exports=t(267)},150:function(e,a,t){},265:function(e,a,t){},266:function(e,a,t){},267:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(23),i=t.n(c),o=t(27),l=t.n(o),d=t(105),s=t(288);function u(e,a){switch(a.type){case"update":return e.map((function(e,t){return t===a.payload.dayIndex?a.payload.dayTasks:e}));case"copy":return e.map((function(e,t,n){return t===a.payload.targetIndex?n[a.payload.sourceIndex]:e}));case"add":return e.map((function(e,t){return t===a.payload.dayIndex?function(e,a){return[].concat(Object(d.a)(e),Object(d.a)(a)).sort((function(e,a){return e.date-a.date}))}(e,a.payload.dayTasks):e}))}}var m=function(){return l()().isoWeekday()-1},f=function(e,a){return l()(e).add(a-m(),"d")},y="alanreidt-calendar-app",p="HH:mm",v=m(),E=Object(n.createContext)(null),k="list",x=t(40),b=t(282),g=t(139),I=t(82),O=t(283),h=t(286),j=t(281);t(150);var T=function(e){return r.a.createElement("div",Object.assign({className:"Box"},e),e.children)},w=t(289);var N=function(e){var a=e.dayIndex,t=e.text,n=Object(w.a)({accept:k,drop:function(e,t){return{index:a}}}),c=Object(x.a)(n,2)[1];return r.a.createElement("span",{ref:c},t)},D=t(141),C=t(290),S=t(71),F=t(291);var W=function(e){var a=e.dayIndex,t=Object(D.a)(e,["dayIndex"]),c=Object(n.useContext)(E),i=Object(C.a)({item:{type:k,index:a},end:function(e,a){if(a.didDrop()){var t=a.getDropResult();c({type:"copy",payload:{sourceIndex:e.index,targetIndex:t.index}})}},collect:function(e){return{opacity:e.isDragging()?.5:1}}}),o=Object(x.a)(i,2),l=o[0].opacity,d=o[1];return r.a.createElement(S.a,Object.assign({ref:d,style:{opacity:l}},t),r.a.createElement(F.a,null))},A=t(285),J=t(292),B=t(284),P=t(287);var V=function(e){var a=e.id,t=e.index,n=e.expired,c=void 0!==n&&n,i=e.button,o=void 0===i?null:i,l=function(e){return function(a){return void 0!==e?[e,a]:a}}(t),d="form-control ".concat(c?"form-control_expired":"");return r.a.createElement(j.a,{"data-flip-id":"id-".concat(a),style:{display:"flex",marginBottom:8},align:"start"},r.a.createElement(A.a.Item,{name:l("date"),rules:[{required:!0,message:"Missing a task date"}]},r.a.createElement(B.a,{className:d,placeholder:p,format:p})),r.a.createElement(A.a.Item,{name:l("name"),rules:[{required:!0,message:"Missing a task name"}]},r.a.createElement(P.a,{className:d,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443",allowClear:!0})),r.a.createElement(A.a.Item,{name:l("id"),hidden:!0},r.a.createElement(P.a,null)),o)};var L=function(e){var a=e.initialTasks,t=void 0===a?[]:a,c=e.dayIndex,i=e.taskDueDate,o=Object(n.useContext)(E),l=A.a.useForm(),d=Object(x.a)(l,1)[0];Object(n.useEffect)((function(){d.setFieldsValue({tasks:t})}),[d,t]);var s,u=(s=i,function(e){return e<s});return r.a.createElement("div",{className:"TaskList"},r.a.createElement(A.a,{form:d,name:"task-list-form",initialValues:{tasks:t},onFinish:function(e){var a=e.tasks.sort((function(e,a){return e.date-a.date}));o({type:"update",payload:{dayIndex:c,dayTasks:a}})},autoComplete:"off"},r.a.createElement(A.a.List,{name:"tasks"},(function(e,a){var n=a.remove;return r.a.createElement("div",null,e.map((function(e,a){var i=t[a].id,o=r.a.createElement(J.a,{onClick:function(){!function(e,a){a(e),setTimeout((function(){d.submit()}),0)}(a,n)}});return r.a.createElement(V,{key:i,id:i,index:a,expired:u(f(t[a].date,c)),button:o})})))})),r.a.createElement(A.a.Item,{hidden:!0},r.a.createElement(S.a,{type:"primary",htmlType:"submit"},"Submit"))))},M=t(293);var R=function(e){var a=e.dayIndex,t=Object(n.useContext)(E),c=A.a.useForm(),i=Object(x.a)(c,1)[0];return r.a.createElement("div",{className:"TaskPanel"},r.a.createElement(A.a,{form:i,name:"task-panel-form",onFinish:function(e){var n=e.tasks;t({type:"add",payload:{dayIndex:a,dayTasks:n}}),i.resetFields()},autoComplete:"off"},r.a.createElement(A.a.List,{name:"tasks"},(function(e,a){var t=a.add;return r.a.createElement("div",null,e.map((function(e,a){var t=i.getFieldsValue().tasks[a].id;return r.a.createElement(V,{key:t,id:t,index:a,button:r.a.createElement(A.a.Item,null,r.a.createElement(S.a,{htmlType:"submit"},r.a.createElement(M.a,null)))})})),e.length<=0&&r.a.createElement(A.a.Item,null,r.a.createElement(S.a,{type:"dashed",onClick:function(){t({name:"",date:"",id:Object(s.a)()})},block:!0},r.a.createElement(M.a,null)," Add field")))}))))},q=h.a.TabPane;var H=function(e){var a=e.weekTasks,t=e.dayNames,c=e.todayDayIndex;Object(I.b)("flip-root");var i=Object(n.useState)(l()()),o=Object(x.a)(i,2),d=o[0],s=o[1];return function(e,a){var t=Object(n.useRef)();Object(n.useEffect)((function(){t.current=e}),[e]),Object(n.useEffect)((function(){if(null!==a){var e=setInterval((function(){t.current()}),a);return function(){return clearInterval(e)}}}),[a])}((function(){s(l()())}),1e3),r.a.createElement(h.a,{defaultActiveKey:String(c),tabPosition:"right",centered:!0},t.map((function(e,t){var n=a[t],c=r.a.createElement(N,{dayIndex:t,text:e});return r.a.createElement(q,{style:{padding:0},tab:c,key:t},r.a.createElement(O.a,{maxWidth:"sm"},r.a.createElement(T,null,r.a.createElement(j.a,{"data-flip-root-id":"flip-root",direction:"vertical",size:"large"},r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(W,{dayIndex:t})),r.a.createElement(L,{dayIndex:t,initialTasks:n,taskDueDate:d}),r.a.createElement(R,{dayIndex:t})))))})))};t(265);var z=function(e){var a=e.initialWeekTasks,t=void 0===a?[]:a,c=e.dayNames,i=e.todayDayIndex,o=Object(n.useReducer)(u,t),d=Object(x.a)(o,2),s=d[0],m=d[1];return Object(n.useEffect)((function(){localStorage.setItem(y,JSON.stringify({weekTasks:s},(function(e,a){return"date"===e?(t=a,l()(t).isValid()?l()(t).format(p):t):a;var t})))})),r.a.createElement(b.a,{backend:g.a},r.a.createElement(I.a,null,r.a.createElement(E.Provider,{value:m},r.a.createElement("div",{className:"App"},r.a.createElement(O.a,{maxWidth:"lg",style:{paddingTop:100}},r.a.createElement(H,{weekTasks:s,dayNames:c,todayDayIndex:i}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(266);var K=JSON.parse(function(){var e=localStorage.getItem(y);return e&&e.weekTasks||JSON.stringify(Array(7).fill([]))}(),(function(e,a){return"date"===e?l()(a,p):a}));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,{initialWeekTasks:K,dayNames:["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"],todayDayIndex:v})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[145,1,2]]]);
//# sourceMappingURL=main.48b6726e.chunk.js.map